{% extends 'base.html' %}

{% block header %}

{% endblock %}

{% block content %}

<div class="jumbotron jumbo-index">
  <div class="container">
    <h1>{% block title %}{{ user['username'] }}'s profile{% endblock %}</h1>
    {% if g.user['username']==user['username'] %}
      <a class="btn btn-info" href="{{ url_for('blog.index') }}">Edit Profile
      <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
    {% elif is_following %}
        <a class="btn btn-default" href="{{ url_for('user.unfollow', username=user['username']) }}">Unfollow</a>
    {% else %}
      <a class="btn btn-success" href="{{ url_for('user.follow', username=user['username']) }}">Follow</a>
    {% endif %}
    <p>{{ user['follower_count'] }} Followers, {{ user['followed_count'] }} Following</p>
  </div>
</div>

<div class="list-group">
  <h2 class="well">{{ user['username'] }}'s posts</h2>
  {% for post in posts %}
    <div class="well">
    <h2 class="list-group-item-heading">{{ post['title'] }}</h2>
          <div>by <a href="{{ url_for('user.user_profile', username=user['username']) }}">
            {{ user['username'] }}</a>
            on {{ post['created'].strftime('%Y-%m-%d') }}</div>
        {% if g.user['id'] == post['author_id'] %}
          <a href="{{ url_for('blog.update', id=post['id']) }}">Edit
          <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
        {% endif %}
      <p class="list-group-item-text">{{ post['body'] }}</p>
    </div>
  {% endfor %}
</div>
{% endblock %}
